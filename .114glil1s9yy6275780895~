module.exports.config = {
	name: "ketduyen",
	version: "1.0.0",
	hasPermssion: 0,
	credits: "Henry fix by JRT",
	description: "Tìm một người và xem xem có nên hẹn hò với họ không?",
	commandCategory: "Tình yêu",
	usages: "[info/breakup]",
	cooldowns: 5
};

function msgBreakup() {
    var msg = ['𝑇ℎ𝑎̣̂𝑡 𝑠𝑢̛̣ 2 𝑛𝑔𝑢̛𝑜̛̀𝑖 𝑘ℎ𝑜̂𝑛𝑔 𝑡��𝑒̂̉ 𝑙𝑎̀𝑚 𝑙𝑎̀𝑛ℎ đ𝑢̛𝑜̛̣𝑐 𝑠𝑎𝑜?', '𝐶𝑢̛́ 𝑛ℎ𝑢̛ 𝑣𝑎̣̂𝑦 𝑚𝑎̀ 𝑏𝑢𝑜̂𝑛𝑔 𝑡𝑎𝑦 𝑛ℎ𝑎𝑢?', '𝐾ℎ𝑜̂𝑛𝑔 đ𝑎𝑢 𝑠𝑎𝑜? 𝐶𝑜́ 𝑐ℎ𝑢̛́? 𝑉𝑎̣̂𝑦 𝑠𝑎𝑜 𝑐𝑜̀𝑛 𝑚𝑢𝑜̂́𝑛 𝑏𝑢𝑜̂𝑛𝑔?', '𝑉𝑖̀ 𝑚𝑜̣̂𝑡 𝑙𝑖́ 𝑑𝑜 𝑛𝑎̀𝑜 đ𝑜́... 2 𝑛𝑔𝑢̛𝑜̛̀𝑖 𝑐𝑜́ 𝑡ℎ𝑒̂̉ 𝑐𝑜̂́ 𝑔𝑎̆́𝑛𝑔 đ𝑢̛𝑜̛̣𝑐 𝑘ℎ𝑜̂𝑛𝑔? ^^', '𝑇𝑖̀𝑛ℎ 𝑦𝑒̂𝑢 𝑙𝑎̀ 𝑘ℎ𝑖 ℎ𝑎𝑖 𝑛𝑔𝑢̛𝑜̛̀𝑖 𝑞𝑢𝑎𝑛 𝑡𝑎̂𝑚, 𝑐ℎ𝑎̆𝑚 𝑠𝑜́𝑐 𝑙𝑎̂̃𝑛 𝑛ℎ𝑎𝑢. 𝐵𝑎̂𝑦 𝑔𝑖𝑜̛̀ 𝑐𝑎̉ 2 𝑏𝑎̣𝑛 đ𝑎̃ ℎ𝑖𝑒̂̀𝑢 đ𝑖𝑒̂̀𝑢 𝑔𝑖̀ đ𝑎̃ 𝑥𝑎̉𝑦 𝑟𝑎, 2 𝑏𝑎̣𝑛 𝑐𝑜́ 𝑡ℎ𝑒̂̉ 𝑞𝑢𝑎𝑦 𝑣𝑒̂̀ 𝑏𝑒̂𝑛 𝑛ℎ𝑎𝑢 đ𝑢̛𝑜̛̣𝑐 𝑘ℎ𝑜̂𝑛𝑔', '𝐺𝑖𝑎̣̂𝑛 đ𝑒̂̉ 𝑏𝑖𝑒̂́𝑡 𝑦𝑒̂𝑢 𝑛ℎ𝑎𝑢 𝑛ℎ𝑖𝑒̂̀𝑢 ℎ𝑜̛𝑛 𝑝ℎ��̉𝑖 𝑘ℎ𝑜̂𝑛𝑔, 𝑐𝑎̉ 2 𝑙𝑎̀𝑚 𝑙𝑎̀𝑛ℎ 𝑛ℎ𝑒́ 𝑣𝑖̀ 𝑘ℎ𝑖 𝑔𝑖𝑎̣̂𝑛 𝑛ℎ𝑎𝑢 𝑚𝑜̛́𝑖 𝑏𝑖𝑒̂́𝑡 đ𝑜̂́𝑖 𝑝ℎ𝑢̛𝑜̛𝑛𝑔 𝑘ℎ𝑜̂𝑛𝑔 𝑡ℎ𝑒̂̉ 𝑠𝑜̂́𝑛𝑔 𝑡ℎ𝑖𝑒̂́𝑢 𝑛ℎ𝑎𝑢']
    return msg[Math.floor(Math.random() * msg.length)];
}

function getMsg() {
    
    return `𝑀𝑜̣𝑖 𝑛𝑔𝑢̛𝑜̛̀𝑖 𝑐𝑢̀𝑛𝑔 𝑡𝑜̛́𝑖 𝑐ℎ𝑢́𝑐 𝑚𝑢̛̀𝑛𝑔 𝑐ℎ𝑜 2 𝑛𝑔𝑢̛𝑜̛̀𝑖 𝑛𝑎̀𝑦 𝑛𝑎̀𝑜 🥰\n- 𝐶𝑢𝑜̂́𝑖 𝑐𝑢̀𝑛𝑔 𝑐ℎ𝑢́𝑐 𝑐𝑎̉ 2 𝑏𝑎̣𝑛 𝑐𝑜́ 𝑛ℎ𝑖𝑒̂̀𝑢 𝑛𝑖𝑒̂̀𝑚 ℎ𝑎̣𝑛ℎ 𝑝ℎ𝑢́𝑐 𝑘ℎ𝑖 𝑜̛̉ 𝑏𝑒̂𝑛 𝑛ℎ𝑎𝑢. 𝐶𝑎̉𝑚 𝑜̛𝑛 𝑣𝑖̀ 𝑠𝑢̛̣ 𝑡𝑖𝑛 𝑡𝑢̛𝑜̛̉𝑛𝑔 𝑐𝑢̉𝑎 𝑏𝑜𝑡 đ𝑎̃ 𝑐ℎ𝑢́𝑐 𝑝ℎ𝑢́𝑐 𝑐ℎ𝑜 2 𝑏𝑎̣𝑛\n- 𝐾𝑦́ 𝑡𝑒̂𝑛: 𝐵𝑜𝑡 𝐽𝑅𝑇 ❤️`
}

module.exports.handleReaction = async function({ api, event, Threads, Users, Currencies, handleReaction }) {
    var { threadID, userID, reaction,messageID } = event;
    var { turn } = handleReaction;
    switch (turn) {
        case "match":
            api.unsendMessage(handleReaction.messageID);
            var { senderID, coin, senderInfo, type } = handleReaction;
            if (senderID != userID) return;
            await Currencies.setData(senderID, { money: coin - 500000 });
            var data = await Threads.getInfo(threadID);
            var { userInfo } = data;
            var doituong = [];
            for (var i of userInfo) {
                var uif = await Users.getInfo(i.id);
                var gender = '';
                if (uif.gender == 1) gender = "Nữ";
                if (uif.gender == 2) gender = "Nam"; 
                if (uif.dating && uif.dating.status == true) continue;
                if (gender == type) doituong.push({ ID: i.id, name: uif.name });
            }
            if (doituong.length == 0) return api.sendMessage(`𝑅𝑎̂́𝑡 𝑡𝑖𝑒̂́𝑐, 𝐵𝑜𝑡 𝐽𝑅𝑇 𝑘ℎ𝑜̂𝑛𝑔 𝑡ℎ𝑒̂̉ 𝑘𝑒̂́𝑡 𝑑𝑢𝑦𝑒̂𝑛 𝑛𝑔𝑢̛𝑜̛̀𝑖 𝑚𝑎̀ 𝑏𝑎̣𝑛 .... 𝐵𝑎̣𝑛 ℎ𝑎��𝑦 𝑣𝑢𝑖 𝑣𝑒̉ 𝑚𝑖̉𝑚 𝑐𝑢̛𝑜̛̀𝑖 đ𝑒̂̉ đ𝑢̛𝑜̛̣𝑐 𝑘𝑒̂́𝑡 𝑑𝑢𝑦𝑒̂𝑛 𝑣𝑜̛́𝑖 𝑛𝑔𝑢̛𝑜̛̀𝑖 𝑘ℎ𝑎́𝑐 𝑡𝑜̂́𝑡 ℎ𝑜̛𝑛 𝑛ℎ𝑒́!!! 💓`, threadID);
            var random = doituong[Math.floor(Math.random() * doituong.length)];
            var msg = {
                body: `[💏] ${senderInfo.name} - 𝑁𝑔𝑢̛𝑜̛̀𝑖 𝑚𝑎̀ 𝐵𝑜𝑡 𝐽𝑅𝑇 𝑘𝑒̂́𝑡 𝑑𝑢𝑦𝑒̂𝑛 𝑐ℎ𝑜 𝑏𝑎̣𝑛 𝑙𝑎̀: ${random.name}\n[💌] 𝑃ℎ𝑢̀ ℎ𝑜̛̣𝑝: ${Math.floor(Math.random() * (80 - 30) + 30)}%\n\n𝑁𝑒̂́𝑢 𝑐𝑎̉ 2 𝑏𝑎̣𝑛 đ𝑜̂̀𝑛𝑔 𝑦́ 𝑠𝑢̛̣ 𝑘𝑒̂́𝑡 𝑑𝑢𝑦𝑒̂𝑛 𝑛𝑎̀𝑦 𝑡ℎ𝑖̀ ℎ𝑎̃𝑦 𝑐𝑢̀𝑛𝑔 𝑛ℎ𝑎𝑢 𝑡ℎ𝑎̉ 𝑟𝑒𝑎𝑐𝑡 ❤️ 𝑣𝑎̀𝑜 𝑡𝑖𝑛 𝑛ℎ𝑎̆́𝑛 𝑛𝑎̀𝑦 𝑛ℎ𝑒́ 𝑣𝑎̀ 𝑐ℎ𝑖́𝑛ℎ 𝑡ℎ𝑢̛́𝑐 𝑐𝑎̉ 2 𝑏𝑎̣𝑛 𝑠𝑒̃ đ𝑢̛𝑜̛̣𝑐 𝑘𝑒̂́𝑡 𝑑𝑢𝑦𝑒̂𝑛 𝑣𝑜̛́𝑖 𝑛ℎ𝑎𝑢 !!!!`,
                mentions: [ { tag: random.name, id: random.ID }, { tag: senderInfo.name, id: senderID } ]
            }
            return api.sendMessage(msg, threadID, (error, info) => {
                global.client.handleReaction.push({ name: this.config.name, messageID: info.messageID, turn: "accept", user_1: { ID: senderID, name: senderInfo.name, accept: false }, user_2: { ID: random.ID, name: random.name, accept: false } });
            });
        case "accept":
            var { user_1, user_2 } = handleReaction;
            if (reaction != '❤') return;
            if (userID == user_1.ID) user_1.accept = true;
            if (userID == user_2.ID) user_2.accept = true;
            if (user_1.accept == true && user_2.accept == true) {
                api.unsendMessage(handleReaction.messageID);
                var infoUser_1 = await Users.getData(user_1.ID);
                var infoUser_2 = await Users.getData(user_2.ID);
                infoUser_1.data.dating = { status: true, mates: user_2.ID, time: { origin: Date.now(), fullTime: global.client.getTime('fullTime') } };
                infoUser_2.data.dating = { status: true, mates: user_1.ID, time: { origin: Date.now(), fullTime: global.client.getTime('fullTime') } };
                return api.sendMessage(`𝐶𝑎̉ ℎ𝑎𝑖 𝑏𝑎̣𝑛 𝑣𝑢̛̀𝑎 𝑡ℎ𝑎̉ 𝑐𝑎̉𝑚 𝑥𝑢́𝑐 ❤️ 𝑛𝑎̀𝑦 𝑐𝑢̀𝑛𝑔 𝑛ℎ𝑎𝑢 𝑛𝑔ℎ𝑖̃𝑎 𝑙𝑎̀ 2 𝑏𝑎̣𝑛 𝑠𝑒̃ 𝑐ℎ𝑎̂́𝑝 𝑛ℎ𝑎̣̂𝑛 𝑡𝑖𝑒̂́𝑛 𝑡𝑜̛́𝑖 ℎ𝑒̣𝑛 ℎ𝑜̀!!!💓`, threadID, async (error, info) => {
                    await Users.setData(user_1.ID, infoUser_1);
                    await Users.setData(user_2.ID, infoUser_2);
                    api.changeNickname(`${user_2.name} - 𝐃𝐚𝐭𝐢𝐧𝐠 𝐰𝐢𝐭𝐡 ${user_1.name}`, threadID, user_2.ID);
                    api.changeNickname(`${user_1.name} - 𝐃𝐚𝐭𝐢𝐧𝐠 𝐰𝐢𝐭𝐡 ${user_2.name}`, threadID, user_1.ID);
                    api.sendMessage({ body: getMsg(), attachment: await this.canvas(user_1.ID, user_2.ID)}, threadID);
                });
            }
            break;
        case 'breakup':
            var { userInfo, userMates, user_1, user_2 } = handleReaction;
            if (userID == user_1.ID) user_1.accept = true;
            if (userID == user_2.ID) user_2.accept = true;
            if (user_1.accept == true && user_2.accept == true) {
                api.unsendMessage(handleReaction.messageID);
                userInfo.data.dating.status = false;
                userMates.data.dating.status = false;
                return api.sendMessage(`𝐶𝑜́ đ𝑜̂𝑖 𝑙𝑢́𝑐, 𝑠𝑢̛̣ 𝑖́𝑐ℎ 𝑘𝑦̉ đ𝑎̃ 𝑙𝑎̀𝑚 𝑡𝑟𝑜𝑛𝑔 𝑠𝑢𝑦 𝑛𝑔ℎ𝑖̃ 𝑐𝑢̉𝑎 𝑏𝑎̣𝑛 𝑥𝑢𝑎̂́𝑡 ℎ𝑖𝑒̣̂𝑛 𝑛ℎ𝑢̛̃𝑛𝑔 𝑡𝑢̛ 𝑡𝑢̛𝑜̛̉𝑛𝑔 𝑥𝑎̂́𝑢. 𝑁ℎ𝑢̛𝑛𝑔 𝑏𝑎̣𝑛 𝑏𝑖𝑒̂́𝑡 𝑘ℎ𝑖 𝑏𝑖𝑒̂́𝑡 𝑦𝑒̂𝑢 𝑚𝑜̣̂𝑡 𝑛𝑔𝑢̛𝑜̛̀𝑖 𝑡ℎ𝑢̛̣𝑐 𝑠𝑢̛̣, 𝑏𝑎̣𝑛 đ𝑎̃ 𝑡𝑟𝑢̛𝑜̛̉𝑛𝑔 𝑡ℎ𝑎̀𝑛ℎ ℎ𝑜̛𝑛 𝑡𝑟𝑜𝑛𝑔 𝑡𝑖̀𝑛ℎ 𝑦𝑒̂𝑢 𝑎̂́𝑦. 𝐵𝑎̣𝑛 đ𝑎̃ 𝑏𝑖𝑒̂́𝑡 𝑦𝑒̂𝑢 𝑚𝑜̣̂𝑡 𝑛𝑔𝑢̛𝑜̛̀𝑖 𝑙𝑎̀ 𝑡ℎ𝑒̂́ 𝑛𝑎̀𝑜.\n𝐻𝑎̃𝑦 𝑣𝑢𝑖 𝑙𝑒̂𝑛 𝑛ℎ𝑒́ đ𝑢̛̀𝑛𝑔 𝑡𝑢̛̀ 𝑏𝑜̉!!! 𝑉𝑖̀ 𝑐𝑜̀𝑛 𝑛ℎ𝑖𝑒̂̀𝑢 𝑛𝑔𝑢̛𝑜̛̀𝑖 𝑟𝑎̂́𝑡 𝑐𝑎̂̀𝑛 𝑏𝑎̣𝑛 ❤️`, threadID, async () => {
                    await Users.setData(user_1.ID, userInfo);
                    await Users.setData(user_2.ID, userMates);
                    api.changeNickname("", threadID, user_1.ID);
                    api.changeNickname("", threadID, user_2.ID);
                   // khi chia tay nó sẽ xóa biệt danh của 2 người//
                })
            }
            break;
        default:
            break;
    }
}
 
module.exports.run = async function({ api, event, args, Users, Currencies }) {
    var { threadID, messageID, senderID } = event;
    var senderInfo = await Users.getData(senderID);
    var type = ''
    switch (args[0]) {
        case "Nam":
        case "nam":
        case "boy":
        case "Boy":
            if (senderInfo.data.dating && senderInfo.data.dating.status == true) return api.sendMessage(`𝑀𝑢𝑜̂́𝑛 𝑐𝑎̆́𝑚 𝑠𝑢̛̀𝑛𝑔 𝑛𝑔𝑢̛𝑜̛̀𝑖 𝑡𝑎 ℎ𝑎𝑦 𝑠𝑎𝑜? 𝐻𝑎̃𝑦 𝑙𝑎̀𝑚 𝑚𝑜̣̂𝑡 𝑛𝑔𝑢̛𝑜̛̀𝑖 𝑐𝑜́ 𝑡𝑟𝑎́𝑐ℎ 𝑛ℎ𝑖𝑒̣̂𝑚 𝑛𝑎̀𝑜. 𝐵𝑎̣𝑛 ℎ𝑖𝑒̣̂𝑛 𝑜̛̉ 𝑡𝑟𝑎̣𝑛𝑔 𝑡ℎ𝑎́𝑖 𝐾𝑒̂́𝑡 𝐷𝑢𝑦𝑒̂𝑛 𝑟𝑜̂̀𝑖 𝑐𝑜̀𝑛 𝑚𝑢𝑜̂́𝑛 𝑘𝑖𝑒̂́𝑚 𝑡ℎ𝑒̂𝑚 𝑛𝑔𝑢̛𝑜̛̀𝑖 𝑘ℎ𝑎́𝑐 ℎ𝑎̉???? 😈`, threadID, messageID);
            type = "Nam";
            break;
        case "Nữ":
        case "nữ":
        case "nu":
        case "Nu":
            if (senderInfo.data.dating && senderInfo.data.dating.status == true) return api.sendMessage(`𝑀𝑢𝑜̂́𝑛 𝑐𝑎̆́𝑚 𝑠𝑢̛̀𝑛𝑔 𝑛𝑔𝑢̛𝑜̛̀𝑖 𝑡𝑎 ℎ𝑎𝑦 𝑠𝑎𝑜? 𝐻𝑎̃𝑦 𝑙𝑎̀𝑚 𝑚𝑜̣̂𝑡 𝑛𝑔𝑢̛𝑜̛̀𝑖 𝑐𝑜́ 𝑡𝑟𝑎́𝑐ℎ 𝑛ℎ𝑖𝑒̣̂𝑚 𝑛𝑎̀𝑜. 𝐵𝑎̣𝑛 ℎ𝑖𝑒̣̂𝑛 𝑜̛̉ 𝑡𝑟𝑎̣𝑛𝑔 𝑡ℎ𝑎́𝑖 𝐾𝑒̂́𝑡 𝐷𝑢𝑦𝑒̂𝑛 𝑟𝑜̂̀𝑖 𝑐𝑜̀𝑛 𝑚𝑢𝑜̂́𝑛 𝑘𝑖𝑒̂́𝑚 𝑡ℎ𝑒̂𝑚 𝑛𝑔𝑢̛𝑜̛̀𝑖 𝑘ℎ𝑎́𝑐 ℎ𝑎̉???? 😈`, threadID, messageID);
            type = "Nữ";
            break;
        case "breakup":
            var userInfo = await Users.getData(senderID);
            if (!userInfo.data.dating || userInfo.data.dating && userInfo.data.dating.status == false) return api.sendMessage(`𝐵𝑎̣𝑛 𝑐ℎ𝑢̛𝑎 𝑘𝑒̂́𝑡 𝑑𝑢𝑦𝑒̂𝑛 𝑣𝑜̛́𝑖 𝑛𝑔𝑢̛𝑜̛̀𝑖 𝑘ℎ𝑎́𝑐 𝑙𝑎̂́𝑦 𝑔𝑖̀ 𝑐ℎ𝑖𝑎 𝑡𝑎𝑦??? 𝐹.𝐴 𝑞𝑢𝑎́ ℎ𝑜́𝑎 𝑟𝑜̂̀ ℎ𝑎̉ 💥`, threadID, messageID);
            if (Date.now() - userInfo.data.dating.time.origin > 604800000) return api.sendMessage(`𝐂𝐨̀𝐧 𝐜𝐡𝐮̛𝐚 𝐭𝐨̛́𝐢 𝟕 𝐧𝐠𝐚̀𝐲 𝐦𝐚̀ 𝐦𝐮𝐨̂́𝐧 𝐜𝐡𝐢𝐚 𝐭𝐚𝐲 𝐥𝐚̀ 𝐬𝐚𝐨? 🥺\n\n${msgBreakup()}\n\n𝐇𝐚̃𝐲 𝐜𝐮̛́ 𝐛𝐢̀𝐧𝐡 𝐭𝐢̃𝐧𝐡 𝐬𝐮𝐲 𝐧𝐠𝐡𝐢̃, 𝐜𝐡𝐨 𝐦𝐨̣𝐢 𝐜𝐡𝐮𝐲𝐞̣̂𝐧 𝐝𝐚̂̀𝐧 𝐥𝐚̆́𝐧𝐠 𝐱𝐮𝐨̂́𝐧𝐠 𝐫𝐨̂̀𝐢 𝐠𝐢𝐚̉𝐢 𝐪𝐮𝐲𝐞̂́𝐭 𝐜𝐮̀𝐧𝐠 𝐧𝐡𝐚𝐮 𝐧𝐡𝐞́ 𝐯𝐢̀ 𝐭𝐢̀𝐧𝐡 𝐲𝐞̂𝐮 𝐤𝐡𝐨̂𝐧𝐠 𝐩𝐡𝐚̉𝐢 𝐚𝐢 𝐜��̃𝐧𝐠 𝐦𝐚𝐲 𝐦𝐚̆́𝐧 𝐭𝐢̀𝐦 𝐭𝐡𝐚̂́𝐲 𝐧𝐡𝐚𝐮 𝐦𝐚̀ ^^`, threadID, messageID);
            var userMates = await Users.getData(userInfo.data.dating.mates);
            return api.sendMessage(`𝐂𝐚̉ 𝟐 𝐧𝐠𝐮̛𝐨̛̀𝐢 𝐭𝐡𝐚̣̂𝐭 𝐬𝐮̛̣ 𝐤𝐡𝐨̂𝐧𝐠 𝐭𝐡𝐞̂̉ 𝐭𝐢𝐞̂́𝐩 𝐭𝐮̣𝐜 𝐧𝐮̛̃𝐚 𝐡𝐚𝐲 𝐬𝐚𝐨 ?\n𝐍𝐞̂́𝐮 𝐜𝐨́ 𝐱𝐞𝐦 𝐭𝐡𝐚̂́𝐲 𝐝𝐨̀𝐧𝐠 𝐭𝐢𝐧 𝐧𝐡𝐚̆́𝐧 𝐧𝐚̀𝐲, 𝐡𝐚̃𝐲 𝐜𝐮̛́ 𝐜𝐡𝐨 𝐦𝐨̣𝐢 𝐜𝐡𝐮𝐲𝐞̣̂𝐧 𝐥𝐚̆́𝐧𝐠 𝐱𝐮𝐨̂́𝐧𝐠...𝐘𝐞̂𝐧 𝐥𝐚̣̆𝐧𝐠 𝐦𝐨̣̂𝐭 𝐜𝐡𝐮́𝐭, 𝐬𝐮𝐲 𝐧𝐠𝐡𝐢̃ 𝐜𝐡𝐨 𝐤𝐢̃ 𝐧𝐚̀𝐨...\n𝐂𝐨́ 𝐧𝐡𝐢𝐞̂̀𝐮 𝐭𝐡𝐮̛́...𝐌𝐨̣̂𝐭 𝐤𝐡𝐢 𝐦𝐚̂́𝐭 đ𝐢 𝐭𝐡𝐢̀ 𝐬𝐞̃ 𝐤𝐡𝐨̂𝐧𝐠 𝐭𝐡𝐞̂̉ 𝐭𝐢̀𝐦 𝐥𝐚̣𝐢 𝐧𝐮̛̃𝐚. ^^\n\n𝐂𝐨̀𝐧 𝐧𝐞̂́𝐮...𝐕𝐚̂̃𝐧 𝐤𝐡𝐨̂𝐧𝐠 𝐭𝐡𝐞̂̉ 𝐭𝐢𝐞̂́𝐩 𝐭𝐮̣𝐜 𝐜𝐮̀𝐧𝐠 𝐧𝐡𝐚𝐮 𝐧𝐮̛̃𝐚...𝐂𝐚̉ 𝟐 𝐧𝐠𝐮̛𝐨̛̀𝐢 𝐡𝐚̃𝐲 𝐭𝐡𝐚̉ 𝐜𝐚̉𝐦 𝐱𝐮́𝐜 𝐯��̀𝐨 𝐭𝐢𝐧 𝐧𝐡𝐚̆́𝐧 𝐧𝐚̀𝐲 𝐧𝐡𝐞́ !`, threadID, (error, info) => {
                global.client.handleReaction.push({ name: this.config.name, messageID: info.messageID, userInfo: userInfo, userMates: userMates, turn: 'breakup', user_1: { ID: senderID, accept: false }, user_2: { ID: userInfo.data.dating.mates, accept: false } })
            }, messageID);
            case "info":
            var userInfo = await Users.getData(senderID);
            if (!userInfo.data.dating || userInfo.data.dating && userInfo.data.dating.status == false) return api.sendMessage(`𝐵𝑎̣𝑛 𝑐𝑎̂̀𝑛 𝑡ℎ𝑜̂𝑛𝑔 𝑡𝑖𝑛 𝑎́??? 𝑉𝑎̣̂𝑦 𝑡ℎ𝑖̀ 𝑛𝑒̀ đ𝑜́ 𝑡ℎ𝑎̂́𝑦 𝑐ℎ𝑢̛𝑎 =)) 𝐵𝑎̣𝑛 𝑐ℎ𝑢̛𝑎 𝑡ℎ𝑎̂́𝑦 𝑐𝑜́ 𝑛𝑔ℎ𝑖̃𝑎 𝑙𝑎̀ 𝑏𝑎̣𝑛 ℎ𝑎𝑦 𝑥𝑒𝑚 𝑠𝑒𝑥 𝑛𝑒̀ 🥲🥲`, threadID, messageID);
            var infoMates = await Users.getData(userInfo.data.dating.mates);
            console.log(userInfo.data.dating.time)
            var fullTime = userInfo.data.dating.time.fullTime;
            console.log(fullTime)
            fullTime = fullTime.match(/[0-9]{2}\/[0-9]{2}\/[0-9]{4}/);
            fullTime = fullTime[0].replace(/\//g, " ").split(' ');
            var date = fullTime[0], month = fullTime[1] - 1, year = fullTime[2];
            var dateNow = global.client.getTime('date'), monthNow = global.client.getTime('month') - 1, yearNow = global.client.getTime('year');
            var date1 = new Date(year, month, date);
            var date2 = new Date(yearNow, monthNow, dateNow);
            var msg = `💓==『 𝐁𝐞𝐞𝐧 𝐓𝐨𝐠𝐞𝐭𝐡𝐞𝐫 』==💓\n\n` +
            `[🖤] 𝐓𝐞̂𝐧 𝐂𝐮̉𝐚 𝐁𝐚̣𝐧: ${userInfo.name}\n` +
            `[🤍] 𝐓𝐞̂𝐧 𝐂𝐮̉𝐚 𝐍𝐠𝐮̛𝐨̛̀𝐢 𝐀̂́𝐲: ${infoMates.name}\n` +
            `[💌] 𝐇𝐞̣𝐧 𝐇𝐨̀ 𝐕𝐚̀𝐨 𝐋𝐮́𝐜: \n${userInfo.data.dating.time.fullTime}\n` +
            `[📆] 𝐘𝐞̂𝐮 𝐍𝐡𝐚𝐮: ${parseInt((date2 - date1) / 86400000)} 𝐧𝐠𝐚̀𝐲\n`
            return api.sendMessage({ body: msg, attachment: await this.canvas(senderID, userInfo.data.dating.mates)}, threadID, messageID);
        default:
            return api.sendMessage(`𝐁𝐚̣𝐧 𝐜𝐚̂̀𝐧 𝐧𝐡𝐚̣̂𝐩 𝐠𝐢𝐨̛́𝐢 𝐭𝐢́𝐧𝐡 𝐜𝐮̉𝐚 𝐧𝐠𝐮̛𝐨̛̀𝐢 𝐦𝐚̀ 𝐛𝐚̣𝐧 𝐦𝐮𝐨̂́𝐧 𝐃𝐚𝐭𝐢𝐧��� [𝐧𝐚𝐦/𝐧𝐮̛̃]`, threadID, messageID);
    }
  
    var { money } = await Currencies.getData(senderID);
    if (money < 500000) return api.sendMessage(`𝐁𝐚̣𝐧 𝐜𝐚̂̀𝐧 𝟓𝟎𝟎𝟎𝟎𝟎 𝐕𝐍𝐃 𝐭𝐢𝐞̂̀𝐧 𝐩𝐡𝐢́ 𝐦𝐮𝐚 𝐧𝐡𝐚̂̃𝐧 𝐏𝐍𝐉 𝐭𝐚̣̆𝐧𝐠 𝐧𝐠𝐮̛𝐨̛̀𝐢 𝐝𝐚𝐭𝐢𝐧𝐠 𝐯𝐨̛́𝐢 𝐛𝐚̣𝐧 💸`, threadID, messageID);
    return api.sendMessage(`𝐁𝐚̣𝐧 𝐬��̃ 𝐛𝐢̣ 𝐭𝐫𝐮̛̀ 𝟓𝟎𝟎𝟎𝟎𝟎 𝐕𝐍𝐃 𝐭𝐢𝐞̂̀𝐧 𝐩𝐡𝐢́ 𝐦𝐮𝐚 𝐧𝐡𝐚̂̃𝐧 𝐏𝐍𝐉 𝐭𝐚̣̆𝐧𝐠 𝐧𝐠𝐮̛𝐨̛̀𝐢 𝐝𝐚𝐭𝐢𝐧𝐠 𝐯𝐨̛́𝐢 𝐛𝐚̣𝐧\n𝐒𝐨̂́ 𝐭𝐢𝐞̂̀𝐧 𝐧𝐚̀𝐲 𝐬𝐞̃ 𝐤𝐡𝐨̂𝐧𝐠 𝐡𝐨𝐚̀𝐧 𝐭𝐫𝐚̉ 𝐧𝐞̂́𝐮 𝟏 𝐭𝐫𝐨𝐧𝐠 𝟐 𝐧𝐠𝐮̛𝐨̛̀𝐢 𝐤𝐡𝐨̂𝐧𝐠 𝐜𝐡𝐚̂́𝐩 𝐧𝐡𝐚̣̂𝐧 𝐭𝐢𝐞̂́𝐧 𝐯𝐚̀𝐨 𝐭𝐫𝐚̣𝐧𝐠 𝐭𝐡𝐚́𝐢 𝐃𝐚𝐭𝐢𝐧𝐠 🖤\n\n𝐓𝐡𝐚̉ 𝐜𝐚̉𝐦 𝐱𝐮́𝐜 𝐯𝐚̀𝐨 𝐭𝐢𝐧 𝐧𝐡𝐚̆́𝐧 𝐧𝐚̀𝐲 𝐧𝐞̂́𝐮 𝐜𝐡𝐚̂́𝐩 𝐧𝐡𝐚̣̂𝐧 𝐭𝐢̀𝐦 𝐤𝐢𝐞̂́𝐦 𝐦𝐨̣̂𝐭 𝐧𝐠𝐮̛𝐨̛̀𝐢.`, threadID, (error, info) => {
        global.client.handleReaction.push({ name: this.config.name, messageID: info.messageID, senderID: senderID, senderInfo: senderInfo, type: type, coin: money, turn: 'match' })
    }, messageID);
}
module.exports.circle = async (image) => {
  const jimp = require('jimp')
  image = await jimp.read(image);
  image.circle();
  return await image.getBufferAsync("image/png");
}
module.exports.canvas = async function (idOne, idTwo) {
    const fs = require('fs')
    const axios = require('axios')
    const { loadImage, createCanvas } = require("canvas");
    let path = __dirname + "/cache/ghep.png";
    let pathAvata = __dirname + `/cache/avtghep2.png`;
    let pathAvataa = __dirname + `/cache/avtghep.png`;
    let getAvatarOne = (await axios.get(`https://graph.facebook.com/${idOne}/picture?width=512&height=512&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`, { responseType: 'arraybuffer' })).data;
    let getAvatarTwo = (await axios.get(`https://graph.facebook.com/${idTwo}/picture?width=512&height=512&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`, { responseType: 'arraybuffer' })).data;
    let bg = ( await axios.get(`https://i.imgur.com/CwSqhsA.jpg`, { responseType: "arraybuffer" })).data;
    fs.writeFileSync(pathAvata, Buffer.from(getAvatarOne, 'utf-8'));
    fs.writeFileSync(pathAvataa, Buffer.from(getAvatarTwo, 'utf-8'));
    fs.writeFileSync(path, Buffer.from(bg, "utf-8"));
    avataruser = await this.circle(pathAvata);
    avataruser2 = await this.circle(pathAvataa);
    let imgB = await loadImage(path);
    let baseAvata = await loadImage(avataruser);
    let baseAvataa = await loadImage(avataruser2);
    let canvas = createCanvas(imgB.width, imgB.height);
    let ctx = canvas.getContext("2d");
    ctx.drawImage(imgB, 0, 0, canvas.width, canvas.height);
    ctx.drawImage(baseAvata, 82, 95, 129, 129);
    ctx.drawImage(baseAvataa, 443, 95, 129, 129);
    ctx.beginPath();
    const imageBuffer = canvas.toBuffer();
    fs.writeFileSync(path, imageBuffer);
    return fs.createReadStream(path)
};