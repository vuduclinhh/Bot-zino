module.exports.config = {
	name: "ketduyen",
	version: "1.0.0",
	hasPermssion: 0,
	credits: "Henry fix by JRT",
	description: "TÃ¬m má»™t ngÆ°á»i vÃ  xem xem cÃ³ nÃªn háº¹n hÃ² vá»›i há» khÃ´ng?",
	commandCategory: "TÃ¬nh yÃªu",
	usages: "[info/breakup]",
	cooldowns: 5
};

function msgBreakup() {
    var msg = ['ğ‘‡â„ğ‘Ì£Ì‚ğ‘¡ ğ‘ ğ‘¢Ì›Ì£ 2 ğ‘›ğ‘”ğ‘¢Ì›ğ‘œÌ›Ì€ğ‘– ğ‘˜â„ğ‘œÌ‚ğ‘›ğ‘” ğ‘¡ï¿½ï¿½ğ‘’Ì‚Ì‰ ğ‘™ğ‘Ì€ğ‘š ğ‘™ğ‘Ì€ğ‘›â„ Ä‘ğ‘¢Ì›ğ‘œÌ›Ì£ğ‘ ğ‘ ğ‘ğ‘œ?', 'ğ¶ğ‘¢Ì›Ì ğ‘›â„ğ‘¢Ì› ğ‘£ğ‘Ì£Ì‚ğ‘¦ ğ‘šğ‘Ì€ ğ‘ğ‘¢ğ‘œÌ‚ğ‘›ğ‘” ğ‘¡ğ‘ğ‘¦ ğ‘›â„ğ‘ğ‘¢?', 'ğ¾â„ğ‘œÌ‚ğ‘›ğ‘” Ä‘ğ‘ğ‘¢ ğ‘ ğ‘ğ‘œ? ğ¶ğ‘œÌ ğ‘â„ğ‘¢Ì›Ì? ğ‘‰ğ‘Ì£Ì‚ğ‘¦ ğ‘ ğ‘ğ‘œ ğ‘ğ‘œÌ€ğ‘› ğ‘šğ‘¢ğ‘œÌ‚Ìğ‘› ğ‘ğ‘¢ğ‘œÌ‚ğ‘›ğ‘”?', 'ğ‘‰ğ‘–Ì€ ğ‘šğ‘œÌ£Ì‚ğ‘¡ ğ‘™ğ‘–Ì ğ‘‘ğ‘œ ğ‘›ğ‘Ì€ğ‘œ Ä‘ğ‘œÌ... 2 ğ‘›ğ‘”ğ‘¢Ì›ğ‘œÌ›Ì€ğ‘– ğ‘ğ‘œÌ ğ‘¡â„ğ‘’Ì‚Ì‰ ğ‘ğ‘œÌ‚Ì ğ‘”ğ‘Ì†Ìğ‘›ğ‘” Ä‘ğ‘¢Ì›ğ‘œÌ›Ì£ğ‘ ğ‘˜â„ğ‘œÌ‚ğ‘›ğ‘”? ^^', 'ğ‘‡ğ‘–Ì€ğ‘›â„ ğ‘¦ğ‘’Ì‚ğ‘¢ ğ‘™ğ‘Ì€ ğ‘˜â„ğ‘– â„ğ‘ğ‘– ğ‘›ğ‘”ğ‘¢Ì›ğ‘œÌ›Ì€ğ‘– ğ‘ğ‘¢ğ‘ğ‘› ğ‘¡ğ‘Ì‚ğ‘š, ğ‘â„ğ‘Ì†ğ‘š ğ‘ ğ‘œÌğ‘ ğ‘™ğ‘Ì‚Ìƒğ‘› ğ‘›â„ğ‘ğ‘¢. ğµğ‘Ì‚ğ‘¦ ğ‘”ğ‘–ğ‘œÌ›Ì€ ğ‘ğ‘Ì‰ 2 ğ‘ğ‘Ì£ğ‘› Ä‘ğ‘Ìƒ â„ğ‘–ğ‘’Ì‚Ì€ğ‘¢ Ä‘ğ‘–ğ‘’Ì‚Ì€ğ‘¢ ğ‘”ğ‘–Ì€ Ä‘ğ‘Ìƒ ğ‘¥ğ‘Ì‰ğ‘¦ ğ‘Ÿğ‘, 2 ğ‘ğ‘Ì£ğ‘› ğ‘ğ‘œÌ ğ‘¡â„ğ‘’Ì‚Ì‰ ğ‘ğ‘¢ğ‘ğ‘¦ ğ‘£ğ‘’Ì‚Ì€ ğ‘ğ‘’Ì‚ğ‘› ğ‘›â„ğ‘ğ‘¢ Ä‘ğ‘¢Ì›ğ‘œÌ›Ì£ğ‘ ğ‘˜â„ğ‘œÌ‚ğ‘›ğ‘”', 'ğºğ‘–ğ‘Ì£Ì‚ğ‘› Ä‘ğ‘’Ì‚Ì‰ ğ‘ğ‘–ğ‘’Ì‚Ìğ‘¡ ğ‘¦ğ‘’Ì‚ğ‘¢ ğ‘›â„ğ‘ğ‘¢ ğ‘›â„ğ‘–ğ‘’Ì‚Ì€ğ‘¢ â„ğ‘œÌ›ğ‘› ğ‘â„ï¿½ï¿½Ì‰ğ‘– ğ‘˜â„ğ‘œÌ‚ğ‘›ğ‘”, ğ‘ğ‘Ì‰ 2 ğ‘™ğ‘Ì€ğ‘š ğ‘™ğ‘Ì€ğ‘›â„ ğ‘›â„ğ‘’Ì ğ‘£ğ‘–Ì€ ğ‘˜â„ğ‘– ğ‘”ğ‘–ğ‘Ì£Ì‚ğ‘› ğ‘›â„ğ‘ğ‘¢ ğ‘šğ‘œÌ›Ìğ‘– ğ‘ğ‘–ğ‘’Ì‚Ìğ‘¡ Ä‘ğ‘œÌ‚Ìğ‘– ğ‘â„ğ‘¢Ì›ğ‘œÌ›ğ‘›ğ‘” ğ‘˜â„ğ‘œÌ‚ğ‘›ğ‘” ğ‘¡â„ğ‘’Ì‚Ì‰ ğ‘ ğ‘œÌ‚Ìğ‘›ğ‘” ğ‘¡â„ğ‘–ğ‘’Ì‚Ìğ‘¢ ğ‘›â„ğ‘ğ‘¢']
    return msg[Math.floor(Math.random() * msg.length)];
}

function getMsg() {
    
    return `ğ‘€ğ‘œÌ£ğ‘– ğ‘›ğ‘”ğ‘¢Ì›ğ‘œÌ›Ì€ğ‘– ğ‘ğ‘¢Ì€ğ‘›ğ‘” ğ‘¡ğ‘œÌ›Ìğ‘– ğ‘â„ğ‘¢Ìğ‘ ğ‘šğ‘¢Ì›Ì€ğ‘›ğ‘” ğ‘â„ğ‘œ 2 ğ‘›ğ‘”ğ‘¢Ì›ğ‘œÌ›Ì€ğ‘– ğ‘›ğ‘Ì€ğ‘¦ ğ‘›ğ‘Ì€ğ‘œ ğŸ¥°\n- ğ¶ğ‘¢ğ‘œÌ‚Ìğ‘– ğ‘ğ‘¢Ì€ğ‘›ğ‘” ğ‘â„ğ‘¢Ìğ‘ ğ‘ğ‘Ì‰ 2 ğ‘ğ‘Ì£ğ‘› ğ‘ğ‘œÌ ğ‘›â„ğ‘–ğ‘’Ì‚Ì€ğ‘¢ ğ‘›ğ‘–ğ‘’Ì‚Ì€ğ‘š â„ğ‘Ì£ğ‘›â„ ğ‘â„ğ‘¢Ìğ‘ ğ‘˜â„ğ‘– ğ‘œÌ›Ì‰ ğ‘ğ‘’Ì‚ğ‘› ğ‘›â„ğ‘ğ‘¢. ğ¶ğ‘Ì‰ğ‘š ğ‘œÌ›ğ‘› ğ‘£ğ‘–Ì€ ğ‘ ğ‘¢Ì›Ì£ ğ‘¡ğ‘–ğ‘› ğ‘¡ğ‘¢Ì›ğ‘œÌ›Ì‰ğ‘›ğ‘” ğ‘ğ‘¢Ì‰ğ‘ ğ‘ğ‘œğ‘¡ Ä‘ğ‘Ìƒ ğ‘â„ğ‘¢Ìğ‘ ğ‘â„ğ‘¢Ìğ‘ ğ‘â„ğ‘œ 2 ğ‘ğ‘Ì£ğ‘›\n- ğ¾ğ‘¦Ì ğ‘¡ğ‘’Ì‚ğ‘›: ğµğ‘œğ‘¡ ğ½ğ‘…ğ‘‡ â¤ï¸`
}

module.exports.handleReaction = async function({ api, event, Threads, Users, Currencies, handleReaction }) {
    var { threadID, userID, reaction,messageID } = event;
    var { turn } = handleReaction;
    switch (turn) {
        case "match":
            api.unsendMessage(handleReaction.messageID);
            var { senderID, coin, senderInfo, type } = handleReaction;
            if (senderID != userID) return;
            await Currencies.setData(senderID, { money: coin - 500000 });
            var data = await Threads.getInfo(threadID);
            var { userInfo } = data;
            var doituong = [];
            for (var i of userInfo) {
                var uif = await Users.getInfo(i.id);
                var gender = '';
                if (uif.gender == 1) gender = "Ná»¯";
                if (uif.gender == 2) gender = "Nam"; 
                if (uif.dating && uif.dating.status == true) continue;
                if (gender == type) doituong.push({ ID: i.id, name: uif.name });
            }
            if (doituong.length == 0) return api.sendMessage(`ğ‘…ğ‘Ì‚Ìğ‘¡ ğ‘¡ğ‘–ğ‘’Ì‚Ìğ‘, ğµğ‘œğ‘¡ ğ½ğ‘…ğ‘‡ ğ‘˜â„ğ‘œÌ‚ğ‘›ğ‘” ğ‘¡â„ğ‘’Ì‚Ì‰ ğ‘˜ğ‘’Ì‚Ìğ‘¡ ğ‘‘ğ‘¢ğ‘¦ğ‘’Ì‚ğ‘› ğ‘›ğ‘”ğ‘¢Ì›ğ‘œÌ›Ì€ğ‘– ğ‘šğ‘Ì€ ğ‘ğ‘Ì£ğ‘› .... ğµğ‘Ì£ğ‘› â„ğ‘ï¿½ï¿½ğ‘¦ ğ‘£ğ‘¢ğ‘– ğ‘£ğ‘’Ì‰ ğ‘šğ‘–Ì‰ğ‘š ğ‘ğ‘¢Ì›ğ‘œÌ›Ì€ğ‘– Ä‘ğ‘’Ì‚Ì‰ Ä‘ğ‘¢Ì›ğ‘œÌ›Ì£ğ‘ ğ‘˜ğ‘’Ì‚Ìğ‘¡ ğ‘‘ğ‘¢ğ‘¦ğ‘’Ì‚ğ‘› ğ‘£ğ‘œÌ›Ìğ‘– ğ‘›ğ‘”ğ‘¢Ì›ğ‘œÌ›Ì€ğ‘– ğ‘˜â„ğ‘Ìğ‘ ğ‘¡ğ‘œÌ‚Ìğ‘¡ â„ğ‘œÌ›ğ‘› ğ‘›â„ğ‘’Ì!!! ğŸ’“`, threadID);
            var random = doituong[Math.floor(Math.random() * doituong.length)];
            var msg = {
                body: `[ğŸ’] ${senderInfo.name} - ğ‘ğ‘”ğ‘¢Ì›ğ‘œÌ›Ì€ğ‘– ğ‘šğ‘Ì€ ğµğ‘œğ‘¡ ğ½ğ‘…ğ‘‡ ğ‘˜ğ‘’Ì‚Ìğ‘¡ ğ‘‘ğ‘¢ğ‘¦ğ‘’Ì‚ğ‘› ğ‘â„ğ‘œ ğ‘ğ‘Ì£ğ‘› ğ‘™ğ‘Ì€: ${random.name}\n[ğŸ’Œ] ğ‘ƒâ„ğ‘¢Ì€ â„ğ‘œÌ›Ì£ğ‘: ${Math.floor(Math.random() * (80 - 30) + 30)}%\n\nğ‘ğ‘’Ì‚Ìğ‘¢ ğ‘ğ‘Ì‰ 2 ğ‘ğ‘Ì£ğ‘› Ä‘ğ‘œÌ‚Ì€ğ‘›ğ‘” ğ‘¦Ì ğ‘ ğ‘¢Ì›Ì£ ğ‘˜ğ‘’Ì‚Ìğ‘¡ ğ‘‘ğ‘¢ğ‘¦ğ‘’Ì‚ğ‘› ğ‘›ğ‘Ì€ğ‘¦ ğ‘¡â„ğ‘–Ì€ â„ğ‘Ìƒğ‘¦ ğ‘ğ‘¢Ì€ğ‘›ğ‘” ğ‘›â„ğ‘ğ‘¢ ğ‘¡â„ğ‘Ì‰ ğ‘Ÿğ‘’ğ‘ğ‘ğ‘¡ â¤ï¸ ğ‘£ğ‘Ì€ğ‘œ ğ‘¡ğ‘–ğ‘› ğ‘›â„ğ‘Ì†Ìğ‘› ğ‘›ğ‘Ì€ğ‘¦ ğ‘›â„ğ‘’Ì ğ‘£ğ‘Ì€ ğ‘â„ğ‘–Ìğ‘›â„ ğ‘¡â„ğ‘¢Ì›Ìğ‘ ğ‘ğ‘Ì‰ 2 ğ‘ğ‘Ì£ğ‘› ğ‘ ğ‘’Ìƒ Ä‘ğ‘¢Ì›ğ‘œÌ›Ì£ğ‘ ğ‘˜ğ‘’Ì‚Ìğ‘¡ ğ‘‘ğ‘¢ğ‘¦ğ‘’Ì‚ğ‘› ğ‘£ğ‘œÌ›Ìğ‘– ğ‘›â„ğ‘ğ‘¢ !!!!`,
                mentions: [ { tag: random.name, id: random.ID }, { tag: senderInfo.name, id: senderID } ]
            }
            return api.sendMessage(msg, threadID, (error, info) => {
                global.client.handleReaction.push({ name: this.config.name, messageID: info.messageID, turn: "accept", user_1: { ID: senderID, name: senderInfo.name, accept: false }, user_2: { ID: random.ID, name: random.name, accept: false } });
            });
        case "accept":
            var { user_1, user_2 } = handleReaction;
            if (reaction != 'â¤') return;
            if (userID == user_1.ID) user_1.accept = true;
            if (userID == user_2.ID) user_2.accept = true;
            if (user_1.accept == true && user_2.accept == true) {
                api.unsendMessage(handleReaction.messageID);
                var infoUser_1 = await Users.getData(user_1.ID);
                var infoUser_2 = await Users.getData(user_2.ID);
                infoUser_1.data.dating = { status: true, mates: user_2.ID, time: { origin: Date.now(), fullTime: global.client.getTime('fullTime') } };
                infoUser_2.data.dating = { status: true, mates: user_1.ID, time: { origin: Date.now(), fullTime: global.client.getTime('fullTime') } };
                return api.sendMessage(`ğ¶ğ‘Ì‰ â„ğ‘ğ‘– ğ‘ğ‘Ì£ğ‘› ğ‘£ğ‘¢Ì›Ì€ğ‘ ğ‘¡â„ğ‘Ì‰ ğ‘ğ‘Ì‰ğ‘š ğ‘¥ğ‘¢Ìğ‘ â¤ï¸ ğ‘›ğ‘Ì€ğ‘¦ ğ‘ğ‘¢Ì€ğ‘›ğ‘” ğ‘›â„ğ‘ğ‘¢ ğ‘›ğ‘”â„ğ‘–Ìƒğ‘ ğ‘™ğ‘Ì€ 2 ğ‘ğ‘Ì£ğ‘› ğ‘ ğ‘’Ìƒ ğ‘â„ğ‘Ì‚Ìğ‘ ğ‘›â„ğ‘Ì£Ì‚ğ‘› ğ‘¡ğ‘–ğ‘’Ì‚Ìğ‘› ğ‘¡ğ‘œÌ›Ìğ‘– â„ğ‘’Ì£ğ‘› â„ğ‘œÌ€!!!ğŸ’“`, threadID, async (error, info) => {
                    await Users.setData(user_1.ID, infoUser_1);
                    await Users.setData(user_2.ID, infoUser_2);
                    api.changeNickname(`${user_2.name} - ğƒğšğ­ğ¢ğ§ğ  ğ°ğ¢ğ­ğ¡ ${user_1.name}`, threadID, user_2.ID);
                    api.changeNickname(`${user_1.name} - ğƒğšğ­ğ¢ğ§ğ  ğ°ğ¢ğ­ğ¡ ${user_2.name}`, threadID, user_1.ID);
                    api.sendMessage({ body: getMsg(), attachment: await this.canvas(user_1.ID, user_2.ID)}, threadID);
                });
            }
            break;
        case 'breakup':
            var { userInfo, userMates, user_1, user_2 } = handleReaction;
            if (userID == user_1.ID) user_1.accept = true;
            if (userID == user_2.ID) user_2.accept = true;
            if (user_1.accept == true && user_2.accept == true) {
                api.unsendMessage(handleReaction.messageID);
                userInfo.data.dating.status = false;
                userMates.data.dating.status = false;
                return api.sendMessage(`ğ¶ğ‘œÌ Ä‘ğ‘œÌ‚ğ‘– ğ‘™ğ‘¢Ìğ‘, ğ‘ ğ‘¢Ì›Ì£ ğ‘–Ìğ‘â„ ğ‘˜ğ‘¦Ì‰ Ä‘ğ‘Ìƒ ğ‘™ğ‘Ì€ğ‘š ğ‘¡ğ‘Ÿğ‘œğ‘›ğ‘” ğ‘ ğ‘¢ğ‘¦ ğ‘›ğ‘”â„ğ‘–Ìƒ ğ‘ğ‘¢Ì‰ğ‘ ğ‘ğ‘Ì£ğ‘› ğ‘¥ğ‘¢ğ‘Ì‚Ìğ‘¡ â„ğ‘–ğ‘’Ì£Ì‚ğ‘› ğ‘›â„ğ‘¢Ì›Ìƒğ‘›ğ‘” ğ‘¡ğ‘¢Ì› ğ‘¡ğ‘¢Ì›ğ‘œÌ›Ì‰ğ‘›ğ‘” ğ‘¥ğ‘Ì‚Ìğ‘¢. ğ‘â„ğ‘¢Ì›ğ‘›ğ‘” ğ‘ğ‘Ì£ğ‘› ğ‘ğ‘–ğ‘’Ì‚Ìğ‘¡ ğ‘˜â„ğ‘– ğ‘ğ‘–ğ‘’Ì‚Ìğ‘¡ ğ‘¦ğ‘’Ì‚ğ‘¢ ğ‘šğ‘œÌ£Ì‚ğ‘¡ ğ‘›ğ‘”ğ‘¢Ì›ğ‘œÌ›Ì€ğ‘– ğ‘¡â„ğ‘¢Ì›Ì£ğ‘ ğ‘ ğ‘¢Ì›Ì£, ğ‘ğ‘Ì£ğ‘› Ä‘ğ‘Ìƒ ğ‘¡ğ‘Ÿğ‘¢Ì›ğ‘œÌ›Ì‰ğ‘›ğ‘” ğ‘¡â„ğ‘Ì€ğ‘›â„ â„ğ‘œÌ›ğ‘› ğ‘¡ğ‘Ÿğ‘œğ‘›ğ‘” ğ‘¡ğ‘–Ì€ğ‘›â„ ğ‘¦ğ‘’Ì‚ğ‘¢ ğ‘Ì‚Ìğ‘¦. ğµğ‘Ì£ğ‘› Ä‘ğ‘Ìƒ ğ‘ğ‘–ğ‘’Ì‚Ìğ‘¡ ğ‘¦ğ‘’Ì‚ğ‘¢ ğ‘šğ‘œÌ£Ì‚ğ‘¡ ğ‘›ğ‘”ğ‘¢Ì›ğ‘œÌ›Ì€ğ‘– ğ‘™ğ‘Ì€ ğ‘¡â„ğ‘’Ì‚Ì ğ‘›ğ‘Ì€ğ‘œ.\nğ»ğ‘Ìƒğ‘¦ ğ‘£ğ‘¢ğ‘– ğ‘™ğ‘’Ì‚ğ‘› ğ‘›â„ğ‘’Ì Ä‘ğ‘¢Ì›Ì€ğ‘›ğ‘” ğ‘¡ğ‘¢Ì›Ì€ ğ‘ğ‘œÌ‰!!! ğ‘‰ğ‘–Ì€ ğ‘ğ‘œÌ€ğ‘› ğ‘›â„ğ‘–ğ‘’Ì‚Ì€ğ‘¢ ğ‘›ğ‘”ğ‘¢Ì›ğ‘œÌ›Ì€ğ‘– ğ‘Ÿğ‘Ì‚Ìğ‘¡ ğ‘ğ‘Ì‚Ì€ğ‘› ğ‘ğ‘Ì£ğ‘› â¤ï¸`, threadID, async () => {
                    await Users.setData(user_1.ID, userInfo);
                    await Users.setData(user_2.ID, userMates);
                    api.changeNickname("", threadID, user_1.ID);
                    api.changeNickname("", threadID, user_2.ID);
                   // khi chia tay nÃ³ sáº½ xÃ³a biá»‡t danh cá»§a 2 ngÆ°á»i//
                })
            }
            break;
        default:
            break;
    }
}
 
module.exports.run = async function({ api, event, args, Users, Currencies }) {
    var { threadID, messageID, senderID } = event;
    var senderInfo = await Users.getData(senderID);
    var type = ''
    switch (args[0]) {
        case "Nam":
        case "nam":
        case "boy":
        case "Boy":
            if (senderInfo.data.dating && senderInfo.data.dating.status == true) return api.sendMessage(`ğ‘€ğ‘¢ğ‘œÌ‚Ìğ‘› ğ‘ğ‘Ì†Ìğ‘š ğ‘ ğ‘¢Ì›Ì€ğ‘›ğ‘” ğ‘›ğ‘”ğ‘¢Ì›ğ‘œÌ›Ì€ğ‘– ğ‘¡ğ‘ â„ğ‘ğ‘¦ ğ‘ ğ‘ğ‘œ? ğ»ğ‘Ìƒğ‘¦ ğ‘™ğ‘Ì€ğ‘š ğ‘šğ‘œÌ£Ì‚ğ‘¡ ğ‘›ğ‘”ğ‘¢Ì›ğ‘œÌ›Ì€ğ‘– ğ‘ğ‘œÌ ğ‘¡ğ‘Ÿğ‘Ìğ‘â„ ğ‘›â„ğ‘–ğ‘’Ì£Ì‚ğ‘š ğ‘›ğ‘Ì€ğ‘œ. ğµğ‘Ì£ğ‘› â„ğ‘–ğ‘’Ì£Ì‚ğ‘› ğ‘œÌ›Ì‰ ğ‘¡ğ‘Ÿğ‘Ì£ğ‘›ğ‘” ğ‘¡â„ğ‘Ìğ‘– ğ¾ğ‘’Ì‚Ìğ‘¡ ğ·ğ‘¢ğ‘¦ğ‘’Ì‚ğ‘› ğ‘Ÿğ‘œÌ‚Ì€ğ‘– ğ‘ğ‘œÌ€ğ‘› ğ‘šğ‘¢ğ‘œÌ‚Ìğ‘› ğ‘˜ğ‘–ğ‘’Ì‚Ìğ‘š ğ‘¡â„ğ‘’Ì‚ğ‘š ğ‘›ğ‘”ğ‘¢Ì›ğ‘œÌ›Ì€ğ‘– ğ‘˜â„ğ‘Ìğ‘ â„ğ‘Ì‰???? ğŸ˜ˆ`, threadID, messageID);
            type = "Nam";
            break;
        case "Ná»¯":
        case "ná»¯":
        case "nu":
        case "Nu":
            if (senderInfo.data.dating && senderInfo.data.dating.status == true) return api.sendMessage(`ğ‘€ğ‘¢ğ‘œÌ‚Ìğ‘› ğ‘ğ‘Ì†Ìğ‘š ğ‘ ğ‘¢Ì›Ì€ğ‘›ğ‘” ğ‘›ğ‘”ğ‘¢Ì›ğ‘œÌ›Ì€ğ‘– ğ‘¡ğ‘ â„ğ‘ğ‘¦ ğ‘ ğ‘ğ‘œ? ğ»ğ‘Ìƒğ‘¦ ğ‘™ğ‘Ì€ğ‘š ğ‘šğ‘œÌ£Ì‚ğ‘¡ ğ‘›ğ‘”ğ‘¢Ì›ğ‘œÌ›Ì€ğ‘– ğ‘ğ‘œÌ ğ‘¡ğ‘Ÿğ‘Ìğ‘â„ ğ‘›â„ğ‘–ğ‘’Ì£Ì‚ğ‘š ğ‘›ğ‘Ì€ğ‘œ. ğµğ‘Ì£ğ‘› â„ğ‘–ğ‘’Ì£Ì‚ğ‘› ğ‘œÌ›Ì‰ ğ‘¡ğ‘Ÿğ‘Ì£ğ‘›ğ‘” ğ‘¡â„ğ‘Ìğ‘– ğ¾ğ‘’Ì‚Ìğ‘¡ ğ·ğ‘¢ğ‘¦ğ‘’Ì‚ğ‘› ğ‘Ÿğ‘œÌ‚Ì€ğ‘– ğ‘ğ‘œÌ€ğ‘› ğ‘šğ‘¢ğ‘œÌ‚Ìğ‘› ğ‘˜ğ‘–ğ‘’Ì‚Ìğ‘š ğ‘¡â„ğ‘’Ì‚ğ‘š ğ‘›ğ‘”ğ‘¢Ì›ğ‘œÌ›Ì€ğ‘– ğ‘˜â„ğ‘Ìğ‘ â„ğ‘Ì‰???? ğŸ˜ˆ`, threadID, messageID);
            type = "Ná»¯";
            break;
        case "breakup":
            var userInfo = await Users.getData(senderID);
            if (!userInfo.data.dating || userInfo.data.dating && userInfo.data.dating.status == false) return api.sendMessage(`ğµğ‘Ì£ğ‘› ğ‘â„ğ‘¢Ì›ğ‘ ğ‘˜ğ‘’Ì‚Ìğ‘¡ ğ‘‘ğ‘¢ğ‘¦ğ‘’Ì‚ğ‘› ğ‘£ğ‘œÌ›Ìğ‘– ğ‘›ğ‘”ğ‘¢Ì›ğ‘œÌ›Ì€ğ‘– ğ‘˜â„ğ‘Ìğ‘ ğ‘™ğ‘Ì‚Ìğ‘¦ ğ‘”ğ‘–Ì€ ğ‘â„ğ‘–ğ‘ ğ‘¡ğ‘ğ‘¦??? ğ¹.ğ´ ğ‘ğ‘¢ğ‘Ì â„ğ‘œÌğ‘ ğ‘Ÿğ‘œÌ‚Ì€ â„ğ‘Ì‰ ğŸ’¥`, threadID, messageID);
            if (Date.now() - userInfo.data.dating.time.origin > 604800000) return api.sendMessage(`ğ‚ğ¨Ì€ğ§ ğœğ¡ğ®Ì›ğš ğ­ğ¨Ì›Ìğ¢ ğŸ• ğ§ğ ğšÌ€ğ² ğ¦ğšÌ€ ğ¦ğ®ğ¨Ì‚Ìğ§ ğœğ¡ğ¢ğš ğ­ğšğ² ğ¥ğšÌ€ ğ¬ğšğ¨? ğŸ¥º\n\n${msgBreakup()}\n\nğ‡ğšÌƒğ² ğœğ®Ì›Ì ğ›ğ¢Ì€ğ§ğ¡ ğ­ğ¢Ìƒğ§ğ¡ ğ¬ğ®ğ² ğ§ğ ğ¡ğ¢Ìƒ, ğœğ¡ğ¨ ğ¦ğ¨Ì£ğ¢ ğœğ¡ğ®ğ²ğÌ£Ì‚ğ§ ğğšÌ‚Ì€ğ§ ğ¥ğšÌ†Ìğ§ğ  ğ±ğ®ğ¨Ì‚Ìğ§ğ  ğ«ğ¨Ì‚Ì€ğ¢ ğ ğ¢ğšÌ‰ğ¢ ğªğ®ğ²ğÌ‚Ìğ­ ğœğ®Ì€ğ§ğ  ğ§ğ¡ğšğ® ğ§ğ¡ğÌ ğ¯ğ¢Ì€ ğ­ğ¢Ì€ğ§ğ¡ ğ²ğÌ‚ğ® ğ¤ğ¡ğ¨Ì‚ğ§ğ  ğ©ğ¡ğšÌ‰ğ¢ ğšğ¢ ğœï¿½ï¿½Ìƒğ§ğ  ğ¦ğšğ² ğ¦ğšÌ†Ìğ§ ğ­ğ¢Ì€ğ¦ ğ­ğ¡ğšÌ‚Ìğ² ğ§ğ¡ğšğ® ğ¦ğšÌ€ ^^`, threadID, messageID);
            var userMates = await Users.getData(userInfo.data.dating.mates);
            return api.sendMessage(`ğ‚ğšÌ‰ ğŸ ğ§ğ ğ®Ì›ğ¨Ì›Ì€ğ¢ ğ­ğ¡ğšÌ£Ì‚ğ­ ğ¬ğ®Ì›Ì£ ğ¤ğ¡ğ¨Ì‚ğ§ğ  ğ­ğ¡ğÌ‚Ì‰ ğ­ğ¢ğÌ‚Ìğ© ğ­ğ®Ì£ğœ ğ§ğ®Ì›Ìƒğš ğ¡ğšğ² ğ¬ğšğ¨ ?\nğğÌ‚Ìğ® ğœğ¨Ì ğ±ğğ¦ ğ­ğ¡ğšÌ‚Ìğ² ğğ¨Ì€ğ§ğ  ğ­ğ¢ğ§ ğ§ğ¡ğšÌ†Ìğ§ ğ§ğšÌ€ğ², ğ¡ğšÌƒğ² ğœğ®Ì›Ì ğœğ¡ğ¨ ğ¦ğ¨Ì£ğ¢ ğœğ¡ğ®ğ²ğÌ£Ì‚ğ§ ğ¥ğšÌ†Ìğ§ğ  ğ±ğ®ğ¨Ì‚Ìğ§ğ ...ğ˜ğÌ‚ğ§ ğ¥ğšÌ£Ì†ğ§ğ  ğ¦ğ¨Ì£Ì‚ğ­ ğœğ¡ğ®Ìğ­, ğ¬ğ®ğ² ğ§ğ ğ¡ğ¢Ìƒ ğœğ¡ğ¨ ğ¤ğ¢Ìƒ ğ§ğšÌ€ğ¨...\nğ‚ğ¨Ì ğ§ğ¡ğ¢ğÌ‚Ì€ğ® ğ­ğ¡ğ®Ì›Ì...ğŒğ¨Ì£Ì‚ğ­ ğ¤ğ¡ğ¢ ğ¦ğšÌ‚Ìğ­ Ä‘ğ¢ ğ­ğ¡ğ¢Ì€ ğ¬ğÌƒ ğ¤ğ¡ğ¨Ì‚ğ§ğ  ğ­ğ¡ğÌ‚Ì‰ ğ­ğ¢Ì€ğ¦ ğ¥ğšÌ£ğ¢ ğ§ğ®Ì›Ìƒğš. ^^\n\nğ‚ğ¨Ì€ğ§ ğ§ğÌ‚Ìğ®...ğ•ğšÌ‚Ìƒğ§ ğ¤ğ¡ğ¨Ì‚ğ§ğ  ğ­ğ¡ğÌ‚Ì‰ ğ­ğ¢ğÌ‚Ìğ© ğ­ğ®Ì£ğœ ğœğ®Ì€ğ§ğ  ğ§ğ¡ğšğ® ğ§ğ®Ì›Ìƒğš...ğ‚ğšÌ‰ ğŸ ğ§ğ ğ®Ì›ğ¨Ì›Ì€ğ¢ ğ¡ğšÌƒğ² ğ­ğ¡ğšÌ‰ ğœğšÌ‰ğ¦ ğ±ğ®Ìğœ ğ¯ï¿½ï¿½Ì€ğ¨ ğ­ğ¢ğ§ ğ§ğ¡ğšÌ†Ìğ§ ğ§ğšÌ€ğ² ğ§ğ¡ğÌ !`, threadID, (error, info) => {
                global.client.handleReaction.push({ name: this.config.name, messageID: info.messageID, userInfo: userInfo, userMates: userMates, turn: 'breakup', user_1: { ID: senderID, accept: false }, user_2: { ID: userInfo.data.dating.mates, accept: false } })
            }, messageID);
            case "info":
            var userInfo = await Users.getData(senderID);
            if (!userInfo.data.dating || userInfo.data.dating && userInfo.data.dating.status == false) return api.sendMessage(`ğµğ‘Ì£ğ‘› ğ‘ğ‘Ì‚Ì€ğ‘› ğ‘¡â„ğ‘œÌ‚ğ‘›ğ‘” ğ‘¡ğ‘–ğ‘› ğ‘Ì??? ğ‘‰ğ‘Ì£Ì‚ğ‘¦ ğ‘¡â„ğ‘–Ì€ ğ‘›ğ‘’Ì€ Ä‘ğ‘œÌ ğ‘¡â„ğ‘Ì‚Ìğ‘¦ ğ‘â„ğ‘¢Ì›ğ‘ =)) ğµğ‘Ì£ğ‘› ğ‘â„ğ‘¢Ì›ğ‘ ğ‘¡â„ğ‘Ì‚Ìğ‘¦ ğ‘ğ‘œÌ ğ‘›ğ‘”â„ğ‘–Ìƒğ‘ ğ‘™ğ‘Ì€ ğ‘ğ‘Ì£ğ‘› â„ğ‘ğ‘¦ ğ‘¥ğ‘’ğ‘š ğ‘ ğ‘’ğ‘¥ ğ‘›ğ‘’Ì€ ğŸ¥²ğŸ¥²`, threadID, messageID);
            var infoMates = await Users.getData(userInfo.data.dating.mates);
            console.log(userInfo.data.dating.time)
            var fullTime = userInfo.data.dating.time.fullTime;
            console.log(fullTime)
            fullTime = fullTime.match(/[0-9]{2}\/[0-9]{2}\/[0-9]{4}/);
            fullTime = fullTime[0].replace(/\//g, " ").split(' ');
            var date = fullTime[0], month = fullTime[1] - 1, year = fullTime[2];
            var dateNow = global.client.getTime('date'), monthNow = global.client.getTime('month') - 1, yearNow = global.client.getTime('year');
            var date1 = new Date(year, month, date);
            var date2 = new Date(yearNow, monthNow, dateNow);
            var msg = `ğŸ’“==ã€ ğğğğ§ ğ“ğ¨ğ ğğ­ğ¡ğğ« ã€==ğŸ’“\n\n` +
            `[ğŸ–¤] ğ“ğÌ‚ğ§ ğ‚ğ®Ì‰ğš ğğšÌ£ğ§: ${userInfo.name}\n` +
            `[ğŸ¤] ğ“ğÌ‚ğ§ ğ‚ğ®Ì‰ğš ğğ ğ®Ì›ğ¨Ì›Ì€ğ¢ ğ€Ì‚Ìğ²: ${infoMates.name}\n` +
            `[ğŸ’Œ] ğ‡ğÌ£ğ§ ğ‡ğ¨Ì€ ğ•ğšÌ€ğ¨ ğ‹ğ®Ìğœ: \n${userInfo.data.dating.time.fullTime}\n` +
            `[ğŸ“†] ğ˜ğÌ‚ğ® ğğ¡ğšğ®: ${parseInt((date2 - date1) / 86400000)} ğ§ğ ğšÌ€ğ²\n`
            return api.sendMessage({ body: msg, attachment: await this.canvas(senderID, userInfo.data.dating.mates)}, threadID, messageID);
        default:
            return api.sendMessage(`ğğšÌ£ğ§ ğœğšÌ‚Ì€ğ§ ğ§ğ¡ğšÌ£Ì‚ğ© ğ ğ¢ğ¨Ì›Ìğ¢ ğ­ğ¢Ìğ§ğ¡ ğœğ®Ì‰ğš ğ§ğ ğ®Ì›ğ¨Ì›Ì€ğ¢ ğ¦ğšÌ€ ğ›ğšÌ£ğ§ ğ¦ğ®ğ¨Ì‚Ìğ§ ğƒğšğ­ğ¢ğ§ï¿½ï¿½ï¿½ [ğ§ğšğ¦/ğ§ğ®Ì›Ìƒ]`, threadID, messageID);
    }
  
    var { money } = await Currencies.getData(senderID);
    if (money < 500000) return api.sendMessage(`ğğšÌ£ğ§ ğœğšÌ‚Ì€ğ§ ğŸ“ğŸğŸğŸğŸğŸ ğ•ğğƒ ğ­ğ¢ğÌ‚Ì€ğ§ ğ©ğ¡ğ¢Ì ğ¦ğ®ğš ğ§ğ¡ğšÌ‚Ìƒğ§ ğğğ‰ ğ­ğšÌ£Ì†ğ§ğ  ğ§ğ ğ®Ì›ğ¨Ì›Ì€ğ¢ ğğšğ­ğ¢ğ§ğ  ğ¯ğ¨Ì›Ìğ¢ ğ›ğšÌ£ğ§ ğŸ’¸`, threadID, messageID);
    return api.sendMessage(`ğğšÌ£ğ§ ğ¬ï¿½ï¿½Ìƒ ğ›ğ¢Ì£ ğ­ğ«ğ®Ì›Ì€ ğŸ“ğŸğŸğŸğŸğŸ ğ•ğğƒ ğ­ğ¢ğÌ‚Ì€ğ§ ğ©ğ¡ğ¢Ì ğ¦ğ®ğš ğ§ğ¡ğšÌ‚Ìƒğ§ ğğğ‰ ğ­ğšÌ£Ì†ğ§ğ  ğ§ğ ğ®Ì›ğ¨Ì›Ì€ğ¢ ğğšğ­ğ¢ğ§ğ  ğ¯ğ¨Ì›Ìğ¢ ğ›ğšÌ£ğ§\nğ’ğ¨Ì‚Ì ğ­ğ¢ğÌ‚Ì€ğ§ ğ§ğšÌ€ğ² ğ¬ğÌƒ ğ¤ğ¡ğ¨Ì‚ğ§ğ  ğ¡ğ¨ğšÌ€ğ§ ğ­ğ«ğšÌ‰ ğ§ğÌ‚Ìğ® ğŸ ğ­ğ«ğ¨ğ§ğ  ğŸ ğ§ğ ğ®Ì›ğ¨Ì›Ì€ğ¢ ğ¤ğ¡ğ¨Ì‚ğ§ğ  ğœğ¡ğšÌ‚Ìğ© ğ§ğ¡ğšÌ£Ì‚ğ§ ğ­ğ¢ğÌ‚Ìğ§ ğ¯ğšÌ€ğ¨ ğ­ğ«ğšÌ£ğ§ğ  ğ­ğ¡ğšÌğ¢ ğƒğšğ­ğ¢ğ§ğ  ğŸ–¤\n\nğ“ğ¡ğšÌ‰ ğœğšÌ‰ğ¦ ğ±ğ®Ìğœ ğ¯ğšÌ€ğ¨ ğ­ğ¢ğ§ ğ§ğ¡ğšÌ†Ìğ§ ğ§ğšÌ€ğ² ğ§ğÌ‚Ìğ® ğœğ¡ğšÌ‚Ìğ© ğ§ğ¡ğšÌ£Ì‚ğ§ ğ­ğ¢Ì€ğ¦ ğ¤ğ¢ğÌ‚Ìğ¦ ğ¦ğ¨Ì£Ì‚ğ­ ğ§ğ ğ®Ì›ğ¨Ì›Ì€ğ¢.`, threadID, (error, info) => {
        global.client.handleReaction.push({ name: this.config.name, messageID: info.messageID, senderID: senderID, senderInfo: senderInfo, type: type, coin: money, turn: 'match' })
    }, messageID);
}
module.exports.circle = async (image) => {
  const jimp = require('jimp')
  image = await jimp.read(image);
  image.circle();
  return await image.getBufferAsync("image/png");
}
module.exports.canvas = async function (idOne, idTwo) {
    const fs = require('fs')
    const axios = require('axios')
    const { loadImage, createCanvas } = require("canvas");
    let path = __dirname + "/cache/ghep.png";
    let pathAvata = __dirname + `/cache/avtghep2.png`;
    let pathAvataa = __dirname + `/cache/avtghep.png`;
    let getAvatarOne = (await axios.get(`https://graph.facebook.com/${idOne}/picture?width=512&height=512&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`, { responseType: 'arraybuffer' })).data;
    let getAvatarTwo = (await axios.get(`https://graph.facebook.com/${idTwo}/picture?width=512&height=512&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`, { responseType: 'arraybuffer' })).data;
    let bg = ( await axios.get(`https://i.imgur.com/CwSqhsA.jpg`, { responseType: "arraybuffer" })).data;
    fs.writeFileSync(pathAvata, Buffer.from(getAvatarOne, 'utf-8'));
    fs.writeFileSync(pathAvataa, Buffer.from(getAvatarTwo, 'utf-8'));
    fs.writeFileSync(path, Buffer.from(bg, "utf-8"));
    avataruser = await this.circle(pathAvata);
    avataruser2 = await this.circle(pathAvataa);
    let imgB = await loadImage(path);
    let baseAvata = await loadImage(avataruser);
    let baseAvataa = await loadImage(avataruser2);
    let canvas = createCanvas(imgB.width, imgB.height);
    let ctx = canvas.getContext("2d");
    ctx.drawImage(imgB, 0, 0, canvas.width, canvas.height);
    ctx.drawImage(baseAvata, 82, 95, 129, 129);
    ctx.drawImage(baseAvataa, 443, 95, 129, 129);
    ctx.beginPath();
    const imageBuffer = canvas.toBuffer();
    fs.writeFileSync(path, imageBuffer);
    return fs.createReadStream(path)
};